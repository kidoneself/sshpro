# ğŸš€ å¿«é€Ÿå¼€å§‹ - 3 æ­¥éƒ¨ç½²å…¨è‡ªåŠ¨æœåŠ¡ç®¡ç†

## å‰ææ¡ä»¶
- âœ… å·²å®‰è£… Node.js
- âœ… æœ‰ Cloudflare è´¦å·

## æ­¥éª¤ 1ï¼šå®‰è£…å¹¶ç™»å½•

```bash
# å®‰è£… wranglerï¼ˆä»…é¦–æ¬¡ï¼‰
npm install -g wrangler

# ç™»å½• Cloudflareï¼ˆä»…é¦–æ¬¡ï¼‰
wrangler login
```

## æ­¥éª¤ 2ï¼šåˆ›å»º KV å¹¶é…ç½®

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd cloudflare-worker

# åˆ›å»º KV namespace
wrangler kv:namespace create "SERVICES_KV"
```

**å¤åˆ¶è¾“å‡ºçš„ ID**ï¼Œä¾‹å¦‚ï¼š
```
id = "abc123def456"
```

**æ‰“å¼€ `wrangler.toml`**ï¼Œå°†ç¬¬ 26 è¡Œçš„ ID æ›¿æ¢ï¼š
```toml
[[kv_namespaces]]
binding = "SERVICES_KV"
id = "abc123def456"  # â† ç²˜è´´ä½ çš„ ID
```

## æ­¥éª¤ 3ï¼šéƒ¨ç½²

```bash
wrangler deploy
```

å¤åˆ¶è¾“å‡ºçš„ URLï¼š
```
https://naspt-services.ä½ çš„è´¦å·.workers.dev
```

## ğŸ¯ åˆå§‹åŒ–ï¼ˆä»…ä¸€æ¬¡ï¼‰

åœ¨æµè§ˆå™¨è®¿é—®ä¸€æ¬¡ï¼š
```
https://naspt-services.ä½ çš„è´¦å·.workers.dev/api/init-services
```

çœ‹åˆ°æˆåŠŸæç¤ºï¼š
```json
{"success":true,"message":"æœåŠ¡æ•°æ®å·²åˆå§‹åŒ–åˆ° KV","count":9}
```

## âœ¨ å¼€å§‹ä½¿ç”¨

### ç”¨æˆ·ç«¯ - ç”Ÿæˆé…ç½®

è®¿é—®ï¼š`https://naspt-services.ä½ çš„è´¦å·.workers.dev/`

1. å‹¾é€‰éœ€è¦çš„æœåŠ¡
2. ç‚¹å‡»"ç”Ÿæˆé…ç½®é“¾æ¥"
3. å¤åˆ¶é“¾æ¥åˆ° NASPT ä½¿ç”¨

### ç®¡ç†ç«¯ - æ·»åŠ æœåŠ¡

**æ–¹å¼ A**ï¼šæ‰“å¼€ `admin.html` æ–‡ä»¶

**æ–¹å¼ B**ï¼šè®¿é—® `/admin` è·¯ç”±ï¼ˆéœ€è¦é›†æˆï¼‰

1. å¡«å†™æœåŠ¡ä¿¡æ¯
2. ç²˜è´´ docker-compose é…ç½®
3. ç‚¹å‡»"ä¿å­˜æœåŠ¡"
4. **ç«‹å³ç”Ÿæ•ˆï¼** ğŸ‰

## ğŸ® æµ‹è¯•åŠŸèƒ½

### æ·»åŠ æµ‹è¯•æœåŠ¡

```bash
curl -X POST https://your-worker.workers.dev/api/service \
  -H "Content-Type: application/json" \
  -d '{
    "id": "test",
    "name": "æµ‹è¯•æœåŠ¡",
    "desc": "æµ‹è¯•",
    "composeConfig": "test:\n  image: nginx:latest",
    "category": "tool"
  }'
```

### éªŒè¯

è®¿é—®é¦–é¡µï¼Œåˆ·æ–°ï¼Œåº”è¯¥çœ‹åˆ°æ–°æœåŠ¡ï¼

### åˆ é™¤æµ‹è¯•æœåŠ¡

```bash
curl -X DELETE https://your-worker.workers.dev/api/service?id=test
```

## ğŸ“± ä½¿ç”¨ç®¡ç†ç•Œé¢

### æ‰“å¼€ admin.html

```bash
# macOS
open admin.html

# Windows
start admin.html

# Linux
xdg-open admin.html
```

ç®¡ç†é¡µé¢ä¼šè‡ªåŠ¨è¿æ¥åˆ°ä½ çš„ Worker APIã€‚

## âœ… å®Œæˆï¼

ç°åœ¨ä½ å¯ä»¥ï¼š

- âœ… **åœ¨çº¿æ·»åŠ **æœåŠ¡ - å¡«è¡¨å•ï¼Œç«‹å³ç”Ÿæ•ˆ
- âœ… **åœ¨çº¿ç¼–è¾‘**æœåŠ¡ - ä¿®æ”¹é…ç½®ï¼Œå®æ—¶æ›´æ–°
- âœ… **åœ¨çº¿åˆ é™¤**æœåŠ¡ - ä¸€é”®åˆ é™¤
- âœ… **ç”Ÿæˆé…ç½®**é“¾æ¥ - ç”¨äº NASPT

**æ— éœ€é‡æ–°éƒ¨ç½²ï¼æ‰€æœ‰æ”¹åŠ¨ç«‹å³ç”Ÿæ•ˆï¼** âš¡

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

æŸ¥çœ‹å®Œæ•´æ–‡æ¡£ï¼š[å…¨è‡ªåŠ¨KVæ–¹æ¡ˆ-å®Œæ•´æŒ‡å—.md](å…¨è‡ªåŠ¨KVæ–¹æ¡ˆ-å®Œæ•´æŒ‡å—.md)

æˆ–æ£€æŸ¥ï¼š
1. KV ID æ˜¯å¦æ­£ç¡®
2. æ˜¯å¦è®¿é—®äº†åˆå§‹åŒ–æ¥å£
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

## ğŸ¯ ä¸‹ä¸€æ­¥

- ğŸ¨ è‡ªå®šä¹‰æœåŠ¡åˆ†ç±»
- ğŸ” æ·»åŠ  API è®¤è¯
- ğŸ“Š æ·»åŠ ä½¿ç”¨ç»Ÿè®¡
- ğŸŒ ç»‘å®šè‡ªå®šä¹‰åŸŸå

äº«å—å…¨è‡ªåŠ¨çš„æœåŠ¡ç®¡ç†ä½“éªŒï¼âœ¨
